{% extends 'base.html' %}
{% load static %}

{% block title %}Reportes{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/administrador/homeAdmin.css' %}">

{% endblock %}

{% block content %}
  <section class="center-area">
    <div class="left-panel">
      <div class="contenedor">
        <div id="subtitle">Reportes Generales</div>
         {% csrf_token %}

    <section id="reporte-maquina">
    <h2>Reporte por Máquina</h2>
      </section>
  <section id="reporte-empleado">
    <h2>Reporte por Empleado</h2>
      </section>
  <section id="reporte-productividad">
    <h2>Reporte de Productividad</h2>
      </section>
  <section id="reporte-consumo">
    <h2>Reporte de Consumo de Hilo</h2>
      </section>

  <section id="demo-ajax">
    <h2>Gestión de Comentarios de Máquinas (Demo AJAX)</h2>
    <p>Usa este formulario para probar las peticiones CRUD con Fetch.</p>
    
    <!-- Formulario oculto por defecto; se muestra al editar -->
    <form id="form-comentario" style="display:none;margin-top:.5rem">
      <input type="hidden" id="comentario-id" value="">
      <input type="number" id="comentario-maquina" placeholder="ID Máquina" required>
      <input type="number" id="comentario-empleado" placeholder="ID Empleado" required>
      <textarea id="comentario-texto" placeholder="Escribe tu comentario..." required></textarea>
      <button type="submit" id="btn-submit-comentario">Modificar (POST)</button>
      <button type="button" id="btn-reset-form" style="background-color: #6c757d;">Limpiar</button>
    </form>

    <button id="btn-consultar">1. Consultar Todos (GET con .then)</button>
    <button id="btn-dependiente">2. Demo Petición Dependiente (async/await)</button>

    <h3>Comentarios Registrados</h3>
    <ul id="lista-comentarios">
        </ul>
  </section>
    </div>
  </section>

{% endblock %}
{% block regresar %}
<li><a href="{% url 'homeAdmin' %}"><i class="fa-solid fa-folder-open"></i> Regresar</a></li>
{% endblock %}

{% block extra_js %}
<script>
    const API_URL = "/api/comentariosmaquinas/";
    const SOLO_LECTURA = true;
</script>
<script src="{% static 'js/administrador/reportes.js' %}"></script>
{% endblock %}
